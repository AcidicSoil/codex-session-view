# Gemini CLI Session Support

Codex Session Viewer can ingest session files that were generated by [Gemini CLI](https://github.com/google-gemini/gemini-cli) in both headless (`--output-format stream-json`) and interactive `/chat save` workflows. This document explains what works out-of-the-box and what configuration toggles are available.

## Upload UX

- **Accepted extensions** – The upload dropzones now accept `.json`, `.jsonl`, `.ndjson`, and `.txt`.
- **Gemini-aware parser** – When a file can’t be parsed line-by-line, the viewer retries with a Gemini JSON parser that understands:
  - Auto-saved conversation files (`~/.gemini/tmp/<project_hash>/chats/session-*.json`)
  - `/chat save` checkpoints (`checkpoint-*.json` and legacy array formats)
  - Headless `tool_use` / `tool_result` events (including shell, search, `ls`, etc.)
- **Tool cards** – Gemini `tool_use` events are mapped onto `FunctionCall`, `LocalShellCall`, and `WebSearchCall` cards so that inputs/results remain paired in the timeline.

## Discovery of local Gemini caches

Codex Session Viewer automatically scans `~/.gemini/tmp` (when it exists) the same way it scans `~/.codex/sessions`, so the default Gemini CLI workspace shows up without additional configuration. If your sessions live elsewhere, you can still point the viewer at specific directories via the environment variable:

```bash
export GEMINI_SESSION_DIR="$HOME/.gemini/tmp"
# Multiple roots are supported via the OS path delimiter, e.g. GEMINI_SESSION_DIR="/tmp/a:/tmp/b"
```

When a directory is registered this way, discovery will only import files that match:

- `**/chats/session-*.json`
- `**/checkpoint-*.json`
- `**/*.jsonl` inside those folders

Each registered directory shows up in the UI with the prefix `Gemini sessions/...` so you can identify the source quickly. Directories specified through the env var are still scoped to the same `chats/` + `checkpoints/` patterns shown above to avoid unrelated temp files.

## Export compatibility

The export modal produces Markdown/JSON/CSV/TXT artifacts based on the normalized event stream, so Gemini imports can be re-exported without losing tool metadata or thought summaries. JSON exports carry the usual `metadata.schemaVersion`, allowing downstream tools to distinguish Codex vs Gemini origins if needed.
